<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Test</title>
</head>
<body>

<div class="container">
  <h1>test heading</h1>
  <p>heiwiw ejkwoeieiei jwhwh urur grg jwkwownwb jeirjrjrnrbrbhe iwiwiw kwk wnw bewjiwow ieyeb 3i3okw nqbshd whhw</p>
</div>

<input type="color" id="color">

<style>
  :root{
    --base-color: #111111;
    --box-color: hsl(from var(--base-color) h s calc(l*1.5));
  }
  body{
    margin: 0;
    display: flex;
    justify-content: center;
    background: var(--base-color);
  }
  .container{
    color: white;
    height: 200px;
    background: var(--box-color);
  }
</style>

<script>
  const input = document.querySelector("input")
  function getContrastColor(hex) {
  const r = parseInt(hex.substr(1,2), 16) / 255;
  const g = parseInt(hex.substr(3,2), 16) / 255;
  const b = parseInt(hex.substr(5,2), 16) / 255;

  const [R, G, B] = [r, g, b].map(c =>
    c <= 0.03928
      ? c / 12.92
      : Math.pow((c + 0.055) / 1.055, 2.4)
  );

  const luminance = 0.2126 * R + 0.7152 * G + 0.0722 * B;

  return luminance > 0.5 ? "black" : "white";
}

input.addEventListener("input", () => {
  const color = input.value;

  document.documentElement.style
    .setProperty("--base-color", color);

  document.querySelector(".container").style.color =
    getContrastColor(color);
});
</script>

</body>
</html>